<html>
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=no" name="viewport" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="apple-touch-icon" href="icon.png">
    <title>Next Train</title>
    <style>
        @keyframes rotation { from { transform: rotate(0deg) } to { transform: rotate(359deg) } }
        ::-webkit-scrollbar { display: none }
        html,
        body  { margin: 0px; padding: 0px; font-family: -apple-system, Arial; background-color: #e0e0e0;
                -webkit-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent; overflow: hidden; }
        #spin { display: none; width: 20px; position: absolute; top: 10px; right: 30px; animation: rotation 800ms infinite linear }
        #titl { text-align: center; margin: 5px 0px; font-weight: bold; }
        #time { margin: 5px 0px; padding: 0px 20px; font-size: 10px; color: #a0a0a0; font-style: italic; }
        .sta  { background-color: #d0d0d0; margin: 5px 10px 15px 10px; padding: 10px; border-radius: 5px; font-weight: bold; }
        .name { font-size: 20px; margin-bottom: 20px; }
        #main { overflow: scroll; border-top: 2px #e0e0e0 solid; scrollbar-color: red; } #main.scrolling { border-top: 2px #999 solid; }
        .dest { margin-top: 5px; color: white; padding: 5px; border-radius: 5px; }
        .plat { display: inline-block; width: 15px; margin-right: 5px; text-align: center; }
        .ttnt { float: right; }
        .sAEL { background-color: #00888A }
        .sEAL { background-color: #53B7E8 }
        .sISL { background-color: #007DC5 }
        .sKTL { background-color: #00AB4E }
        .sSIL { background-color: #BAC429 }
        .sTCL { background-color: #F7943E }
        .sTKL { background-color: #7D499D }
        .sTML { background-color: #923011 }
        .sTWL { background-color: #ED1D24 }
        #bpad { height: 50px; }
        /* override for the pull to refresh plugin */
        .ptr--ptr { box-shadow: inset 0 -3px 5px rgba(0,0,0,0) !important };
    </style>
</head>
<body>
    <div id="titl"><span>Next Train</span><div id="time"></div></div>
    <!-- <img id="spin" src="loading.gif" /> -->
    <img id="spin" src="data:img/webp;base64, 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" />
    <div id="main"></div>
    <!-- template -->
    <template id="Tsta"><div class="sta"><div class="name">{{sta}} {{prox}}</div><div>{{{plats}}}</div></div></template>
    <template id="TstaDest"><div class="dest s{{line}}"><span class="plat">{{plat}}</span><span>{{dest}}</span><span style="float: right; font-weight: normal">&nbsp;mins</span><span class="ttnt">{{ttnt}}</span></div></template>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.1/mustache.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pulltorefreshjs/0.1.22/index.umd.min.js" integrity="sha512-djmgTiVR15A/7fON+ojDzFYrRsfVkzQZu07ZVb0zLC1OhA2iISP39Lzs05GqSKF0vPjkLzL5hBC+am6po7dKpA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        const $ = document.querySelector.bind( document );
        const DEFAULT_STA = ['NAC', 'HOK', 'CEN']; var PROX_STA = [];
        const REF = {"ADM":{"line":{"EAL":{},"ISL":{},"TWL":{},"SIL":{}},"chi":"金鐘","eng":"Admiralty"},"AIR":{"line":{"AEL":{}},"chi":"機場","eng":"Airport"},"AUS":{"line":{"TML":{}},"chi":"柯士甸","eng":"Austin"},"AWE":{"line":{"AEL":{}},"chi":"博覽館","eng":"AsiaWorld-Expo"},"CAB":{"line":{"ISL":{}},"chi":"銅鑼灣","eng":"Causeway Bay"},"CEN":{"line":{"ISL":{},"TWL":{}},"chi":"中環","eng":"Central"},"CHH":{"line":{"KTL":{}},"chi":"彩虹","eng":"Choi Hung"},"CHW":{"line":{"ISL":{}},"chi":"柴灣","eng":"Chai Wan"},"CIO":{"line":{"TML":{}},"chi":"第一城","eng":"City One"},"CKT":{"line":{"TML":{}},"chi":"車公廟","eng":"Che Kung Temple"},"CSW":{"line":{"TWL":{}},"chi":"長沙灣","eng":"Cheung Sha Wan"},"DIH":{"line":{"KTL":{},"TML":{}},"chi":"鑽石山","eng":"Diamond Hill"},"DIS":{"line":{"DRL":{}},"chi":"迪士尼","eng":"Disneyland Resort"},"ETS":{"line":{"TML":{}},"chi":"尖東","eng":"East Tsim Sha Tsui"},"EXC":{"line":{"EAL":{}},"chi":"會展","eng":"Exhibition Centre"},"FAN":{"line":{"EAL":{}},"chi":"粉嶺","eng":"Fanling"},"FOH":{"line":{"ISL":{}},"chi":"炮台山","eng":"Fortress Hill"},"FOT":{"line":{"EAL":{}},"chi":"火炭","eng":"Fo Tan"},"HAH":{"line":{"TKL":{}},"chi":"坑口","eng":"Hang Hau"},"HEO":{"line":{"TML":{}},"chi":"恆安","eng":"Heng On"},"HFC":{"line":{"ISL":{}},"chi":"杏花邨","eng":"Heng Fa Chuen"},"HIK":{"line":{"TML":{}},"chi":"顯徑","eng":"Hin Keng"},"HKU":{"line":{"ISL":{}},"chi":"香港大學","eng":"HKU"},"HOK":{"line":{"AEL":{},"TCL":{}},"chi":"香港","eng":"Hong Kong"},"HOM":{"line":{"KTL":{},"TML":{}},"chi":"何文田","eng":"Ho Man Tin"},"HUH":{"line":{"EAL":{},"TML":{}},"chi":"紅磡","eng":"Hung Hom"},"JOR":{"line":{"TWL":{}},"chi":"佐敦","eng":"Jordan"},"KAT":{"line":{"TML":{}},"chi":"啟德","eng":"Kai Tak"},"KET":{"line":{"ISL":{}},"chi":"堅尼地城","eng":"Kennedy Town"},"KOB":{"line":{"KTL":{}},"chi":"九龍灣","eng":"Kowloon Bay"},"KOT":{"line":{"EAL":{},"KTL":{}},"chi":"九龍塘","eng":"Kowloon Tong"},"KOW":{"line":{"AEL":{},"TCL":{}},"chi":"九龍","eng":"Kowloon"},"KSR":{"line":{"TML":{}},"chi":"錦上路","eng":"Kam Sheung Road"},"KWF":{"line":{"TWL":{}},"chi":"葵芳","eng":"Kwai Fong"},"KWH":{"line":{"TWL":{}},"chi":"葵興","eng":"Kwai Hing"},"KWT":{"line":{"KTL":{}},"chi":"觀塘","eng":"Kwun Tong"},"LAK":{"line":{"TCL":{},"TWL":{}},"chi":"茘景","eng":"Lai King"},"LAT":{"line":{"KTL":{}},"chi":"藍田","eng":"Lam Tin"},"LCK":{"line":{"TWL":{}},"chi":"茘枝角","eng":"Lai Chi Kok"},"LET":{"line":{"SIL":{}},"chi":"利東","eng":"Lei Tung"},"LHP":{"line":{"TKL":{}},"chi":"康城","eng":"LOHAS Park"},"LMC":{"line":{"EAL":{}},"chi":"落馬洲","eng":"Lok Ma Chau"},"LOF":{"line":{"KTL":{}},"chi":"樂富","eng":"Lok Fu"},"LOP":{"line":{"TML":{}},"chi":"朗屏","eng":"Long Ping"},"LOW":{"line":{"EAL":{}},"chi":"羅湖","eng":"Lo Wu"},"MEF":{"line":{"TML":{},"TWL":{}},"chi":"美孚","eng":"Mei Foo"},"MKK":{"line":{"EAL":{}},"chi":"旺角東","eng":"Mong Kok East"},"MOK":{"line":{"KTL":{},"TWL":{}},"chi":"旺角","eng":"Mong Kok"},"MOS":{"line":{"TML":{}},"chi":"馬鞍山","eng":"Ma On Shan"},"NAC":{"line":{"TML":{},"TCL":{}},"chi":"南昌","eng":"Nam Cheong"},"NOP":{"line":{"ISL":{},"TKL":{}},"chi":"北角","eng":"North Point"},"NTK":{"line":{"KTL":{}},"chi":"牛頭角","eng":"Ngau Tau Kok"},"OCP":{"line":{"SIL":{}},"chi":"海洋公園","eng":"Ocean Park"},"OLY":{"line":{"TCL":{}},"chi":"奧運","eng":"Olympic"},"POA":{"line":{"TKL":{}},"chi":"寶琳","eng":"Po Lam"},"PRE":{"line":{"KTL":{},"TWL":{}},"chi":"太子","eng":"Prince Edward"},"QUB":{"line":{"ISL":{},"TKL":{}},"chi":"鰂魚涌","eng":"Quarry Bay"},"SHM":{"line":{"TML":{}},"chi":"石門","eng":"Shek Mun"},"SHS":{"line":{"EAL":{}},"chi":"上水","eng":"Sheung Shui"},"SHT":{"line":{"EAL":{}},"chi":"沙田","eng":"Sha Tin"},"SHW":{"line":{"ISL":{}},"chi":"上環","eng":"Sheung Wan"},"SIH":{"line":{"TML":{}},"chi":"兆康","eng":"Siu Hong"},"SKM":{"line":{"KTL":{}},"chi":"石硤尾","eng":"Shek Kip Mei"},"SKW":{"line":{"ISL":{}},"chi":"筲箕灣","eng":"Shau Kei Wan"},"SOH":{"line":{"SIL":{}},"chi":"海怡半島","eng":"South Horizons"},"SSP":{"line":{"TWL":{}},"chi":"深水埗","eng":"Sham Shui Po"},"STW":{"line":{"TML":{}},"chi":"沙田圍","eng":"Sha Tin Wai"},"SUN":{"line":{"DRL":{},"TCL":{}},"chi":"欣澳","eng":"Sunny Bay"},"SUW":{"line":{"TML":{}},"chi":"宋皇臺","eng":"Sung Wong Toi"},"SWH":{"line":{"ISL":{}},"chi":"西灣河","eng":"Sai Wan Ho"},"SYP":{"line":{"ISL":{}},"chi":"西營盤","eng":"Sai Ying Pun"},"TAK":{"line":{"ISL":{}},"chi":"太古","eng":"Tai Koo"},"TAP":{"line":{"EAL":{}},"chi":"大埔墟","eng":"Tai Po Market"},"TAW":{"line":{"EAL":{},"TML":{}},"chi":"大圍","eng":"Tai Wai"},"TIH":{"line":{"ISL":{}},"chi":"天后","eng":"Tin Hau"},"TIK":{"line":{"KTL":{},"TKL":{}},"chi":"調景嶺","eng":"Tiu Keng Leng"},"TIS":{"line":{"TML":{}},"chi":"天水圍","eng":"Tin Shui Wai"},"TKO":{"line":{"TKL":{}},"chi":"將軍澳","eng":"Tseung Kwan O"},"TKW":{"line":{"TML":{}},"chi":"土瓜灣","eng":"To Kwa Wan"},"TSH":{"line":{"TML":{}},"chi":"大水坑","eng":"Tai Shui Hang"},"TST":{"line":{"TWL":{}},"chi":"尖沙咀","eng":"Tsim Sha Tsui"},"TSW":{"line":{"TWL":{}},"chi":"荃灣","eng":"Tsuen Wan"},"TSY":{"line":{"AEL":{},"TCL":{}},"chi":"青衣","eng":"Tsing Yi"},"TUC":{"line":{"TCL":{}},"chi":"東涌","eng":"Tung Chung"},"TUM":{"line":{"TML":{}},"chi":"屯門","eng":"Tuen Mun"},"TWH":{"line":{"TWL":{}},"chi":"大窩口","eng":"Tai Wo Hau"},"TWO":{"line":{"EAL":{}},"chi":"太和","eng":"Tai Wo"},"TWW":{"line":{"TML":{}},"chi":"荃灣西","eng":"Tsuen Wan West"},"UNI":{"line":{"EAL":{}},"chi":"大學","eng":"University"},"WAC":{"line":{"ISL":{}},"chi":"灣仔","eng":"Wan Chai"},"WCH":{"line":{"SIL":{}},"chi":"黃竹坑","eng":"Wong Chuk Hang"},"WHA":{"line":{"KTL":{}},"chi":"黃埔","eng":"Whampoa"},"WKS":{"line":{"TML":{}},"chi":"烏溪沙","eng":"Wu Kai Sha"},"WTS":{"line":{"KTL":{}},"chi":"黃大仙","eng":"Wong Tai Sin"},"YAT":{"line":{"KTL":{},"TKL":{}},"chi":"油塘","eng":"Yau Tong"},"YMT":{"line":{"KTL":{},"TWL":{}},"chi":"油麻地","eng":"Yau Ma Tei"},"YUL":{"line":{"TML":{}},"chi":"元朗","eng":"Yuen Long"}};
        const STA_COORD = [{"sta":"AWE","latitude":22.3218,"longitude":113.9412},{"sta":"AIR","latitude":22.316,"longitude":113.9366},{"sta":"TSY","latitude":22.3584,"longitude":114.107},{"sta":"KOW","latitude":22.3049,"longitude":114.1615},{"sta":"HOK","latitude":22.285,"longitude":114.158},{"sta":"SUN","latitude":22.3318,"longitude":114.0288},{"sta":"DIS","latitude":22.3155,"longitude":114.0451},{"sta":"LOW","latitude":22.5283,"longitude":114.1134},{"sta":"SHS","latitude":22.5012,"longitude":114.128},{"sta":"FAN","latitude":22.4921,"longitude":114.1387},{"sta":"TWO","latitude":22.4511,"longitude":114.1611},{"sta":"TAP","latitude":22.4446,"longitude":114.1706},{"sta":"UNI","latitude":22.4134,"longitude":114.2102},{"sta":"FOT","latitude":22.3953,"longitude":114.1982},{"sta":"SHT","latitude":22.3825,"longitude":114.1875},{"sta":"TAW","latitude":22.3731,"longitude":114.1786},{"sta":"KOT","latitude":22.337,"longitude":114.1762},{"sta":"MKK","latitude":22.3222,"longitude":114.1728},{"sta":"HUH","latitude":22.3029,"longitude":114.1816},{"sta":"EXC","latitude":22.2818,"longitude":114.1754},{"sta":"ADM","latitude":22.2788,"longitude":114.1646},{"sta":"LMC","latitude":22.5144,"longitude":114.0657},{"sta":"CHW","latitude":22.2644,"longitude":114.2368},{"sta":"HFC","latitude":22.2769,"longitude":114.2398},{"sta":"SKW","latitude":22.2789,"longitude":114.2289},{"sta":"SWH","latitude":22.2816,"longitude":114.2224},{"sta":"TAK","latitude":22.2846,"longitude":114.2161},{"sta":"QUB","latitude":22.2878,"longitude":114.2096},{"sta":"NOP","latitude":22.2909,"longitude":114.2007},{"sta":"FOH","latitude":22.2881,"longitude":114.1936},{"sta":"TIH","latitude":22.2827,"longitude":114.1917},{"sta":"CAB","latitude":22.2802,"longitude":114.1835},{"sta":"WAC","latitude":22.2773,"longitude":114.1728},{"sta":"CEN","latitude":22.282,"longitude":114.1576},{"sta":"SHW","latitude":22.2862,"longitude":114.1518},{"sta":"SYP","latitude":22.2856,"longitude":114.1427},{"sta":"HKU","latitude":22.2841,"longitude":114.1356},{"sta":"KET","latitude":22.2812,"longitude":114.1285},{"sta":"TIK","latitude":22.3042,"longitude":114.2524},{"sta":"YAT","latitude":22.2979,"longitude":114.2371},{"sta":"LATitude","latitude":22.3068,"longitude":114.233},{"sta":"KWT","latitude":22.3121,"longitude":114.2265},{"sta":"NTK","latitude":22.3154,"longitude":114.2193},{"sta":"KOB","latitude":22.3235,"longitude":114.2141},{"sta":"CHH","latitude":22.3348,"longitude":114.2089},{"sta":"DIH","latitude":22.3401,"longitude":114.2016},{"sta":"WTS","latitude":22.3417,"longitude":114.1939},{"sta":"LOF","latitude":22.338,"longitude":114.1871},{"sta":"SKM","latitude":22.332,"longitude":114.1687},{"sta":"PRE","latitude":22.3245,"longitude":114.1683},{"sta":"MOK","latitude":22.3191,"longitude":114.1694},{"sta":"YMT","latitude":22.3129,"longitude":114.1707},{"sta":"HOM","latitude":22.3093,"longitude":114.1829},{"sta":"WHA","latitude":22.305,"longitude":114.1896},{"sta":"WKS","latitude":22.4291,"longitude":114.2438},{"sta":"MOS","latitude":22.4247,"longitude":114.2316},{"sta":"HEO","latitude":22.4174,"longitude":114.2258},{"sta":"TSH","latitude":22.4088,"longitude":114.223},{"sta":"SHM","latitude":22.3877,"longitude":114.2083},{"sta":"CIO","latitude":22.3828,"longitude":114.2035},{"sta":"STW","latitude":22.3771,"longitude":114.195},{"sta":"CKT","latitude":22.3748,"longitude":114.1861},{"sta":"HIK","latitude":22.364,"longitude":114.1708},{"sta":"KAT","latitude":22.3304,"longitude":114.1994},{"sta":"SUW","latitude":22.3258,"longitude":114.1914},{"sta":"TKW","latitude":22.3172,"longitude":114.1876},{"sta":"ETS","latitude":22.2955,"longitude":114.1754},{"sta":"AUS","latitude":22.3046,"longitude":114.1665},{"sta":"NAC","latitude":22.3268,"longitude":114.1533},{"sta":"MEF","latitude":22.3381,"longitude":114.1376},{"sta":"TWW","latitude":22.3686,"longitude":114.1098},{"sta":"KSR","latitude":22.4348,"longitude":114.0634},{"sta":"YUL","latitude":22.4461,"longitude":114.0352},{"sta":"LOP","latitude":22.4477,"longitude":114.0253},{"sta":"TIS","latitude":22.4481,"longitude":114.0046},{"sta":"SIH","latitude":22.412,"longitude":113.9786},{"sta":"TUM","latitude":22.3952,"longitude":113.9731},{"sta":"TUC","latitude":22.2893,"longitude":113.9416},{"sta":"LAK","latitude":22.3484,"longitude":114.1261},{"sta":"OLY","latitude":22.3178,"longitude":114.1602},{"sta":"POA","latitude":22.3224,"longitude":114.258},{"sta":"HAH","latitude":22.3156,"longitude":114.2644},{"sta":"TKO","latitude":22.3074,"longitude":114.26},{"sta":"LHP","latitude":22.2957,"longitude":114.2689},{"sta":"TSW","latitude":22.3736,"longitude":114.1178},{"sta":"TWH","latitude":22.3708,"longitude":114.125},{"sta":"KWH","latitude":22.3632,"longitude":114.1312},{"sta":"KWF","latitude":22.3569,"longitude":114.1279},{"sta":"LCK","latitude":22.3373,"longitude":114.1482},{"sta":"CSW","latitude":22.3354,"longitude":114.1563},{"sta":"SSP","latitude":22.3307,"longitude":114.1623},{"sta":"JOR","latitude":22.3049,"longitude":114.1718},{"sta":"TST","latitude":22.2973,"longitude":114.1722},{"sta":"OCP","latitude":22.2486,"longitude":114.1743},{"sta":"WCH","latitude":22.248,"longitude":114.1681},{"sta":"LET","latitude":22.2421,"longitude":114.1562},{"sta":"SOH","latitude":22.2425,"longitude":114.1491}];
        // utility
        Array.prototype.distinct = function(){ return [...new Set(this)] };
        Array.prototype.except = function(x){return this.filter(y=>x.indexOf(y)<0)};
        // d - calc distance between two latitude-longitude, result in meters
        let d = (d1,d2) => { let latitude=d1.latitude-d2.latitude, longitude=d1.longitude-d2.longitude; return 100000*Math.sqrt(latitude*latitude+longitude*longitude) }
        // g - fetching from web and put the latest into STATIONS
        let g = async (l,s) => {
            let u = `https://rt.data.gov.hk/v1/transport/mtr/getSchedule.php?line=${l}&sta=${s}`; // console.log(u);
            return fetch(u).then(x=>x.json()).then(o => {
                Object.entries(o['data']).forEach(([p,d]) => {
                    Object.entries((Object.groupBy([d.UP??[], d.DOWN??[]].flat(1), ({plat})=>plat))).forEach(([plat,time]) => {
                        STATIONS[s][l][plat+''] = time; r();
                    });
                });
            });
        }
        // r - generate HTML and render (order: sta -> line -> dest -> time)
        let r = () => {
            setTimeout(() => {$('#spin').style.display = 'none'}, 1600);
            let currTime = new Date();
            let ss = Object.entries(STATIONS).sort((a,b)=>PROX_STA.indexOf(a[0])>=0?(PROX_STA.indexOf(b[0])>=0?0:-1):0).map(([sta, line_dict]) => {
                let plats = Object.entries(line_dict).map(([line, plat_dict]) => {
                    return Object.entries(plat_dict).map(([plat, time_list]) => {
                        // Math.floor((new Date(x.time)-currTime)/60000)
                        let ttnt = time_list.map(x=>x.ttnt).filter(x=>x<=10).join(', ');
                        return Mustache.render($('#TstaDest').innerHTML, {line, plat, dest: time_list.map(x=>REF[x.dest].chi).distinct().join(' / '), ttnt:ttnt==''?'-':ttnt});
                    }).join('');
                }).join('');
                return Mustache.render($('#Tsta').innerHTML, {sta: REF[sta].chi, prox: PROX_STA.indexOf(sta)>=0?'📍':'',  plats});
            }).join('');
            $('#main').innerHTML = ss + "<div id='bpad'></div>";
            $('#time').innerText = 'Last update: ' + new Date().toLocaleTimeString();
        }
        // f - running the actual fetch in a loop
        let f = () => {
            $('#spin').style.display = 'block';
            navigator.geolocation.getCurrentPosition(x => {
                let t = STA_COORD.filter(y=>d(x.coords,y)<=500).map(y=>y.sta);
                t.except(PROX_STA.concat(DEFAULT_STA)).forEach(x => STATIONS[x] = REF[x].line); // add
                PROX_STA.except(t).except(DEFAULT_STA).forEach(x => {delete STATIONS[x]}); // remove
                PROX_STA = t;
                Object.entries(STATIONS).forEach(([s,ls]) => { Object.keys(ls).forEach(l => g(l,s)) });
            }, () => {
                console.error('Failed to getCurrentPosition');
                Object.entries(STATIONS).forEach(([s,ls]) => { Object.keys(ls).forEach(l => g(l,s)) });
            });
        }
        // initialize
        var STATIONS = Object.fromEntries(DEFAULT_STA.map(s=>[s, REF[s].line]));
        let main = $('#main'); main.addEventListener('scroll', x=> { main.className = x.target.scrollTop>5?'scrolling':''});
        if (window.location.host.indexOf('1')===0) {
            f(); $('#titl').addEventListener('touchstart', f);
        } else {
            // feel free to fork this and make it usable for yourself
            crypto.subtle.digest('SHA-256', new TextEncoder().encode(window.location.href.split('?')[1]))
                .then(x=>Array.from(new Uint8Array(x)))
                .then(x=>x.map(b => b.toString(16).padStart(2, '0')).join(''))
                .then(h=>{if(h==='c0f3a4bad8c9b0e6f89d5624668f3df44f93bb7971323b496c0f3cd79f9f592c'){
                    f(); $('#titl').addEventListener('touchstart', f);
                } else $('#titl>span').innerText = 'Unknown User';
            });
        }
        main.style.height = window.innerHeight - 50;
        document.addEventListener("visibilitychange", e => { if (document.visibilityState == "visible"){f()} });
        // pull to refresh
        var PULL_FROM_TOP = true;
        document.addEventListener("touchstart", e => { PULL_FROM_TOP = $("#main").scrollTop <= 5 });
        PullToRefresh.init({
            mainElement: '#main',
            shouldPullToRefresh: () => PULL_FROM_TOP,
            onRefresh: f
        });
    </script>
</body>
</html>
