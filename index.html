<html>
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=no" name="viewport" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>Next Train</title>
    <style>
        html,
        body  { margin: 0px; padding: 0px; font-family: -apple-system, Arial; background-color: #e0e0e0;
                -webkit-user-select: none; user-select: none; -webkit-tap-highlight-color: transparent; overflow: hidden; }
        #titl { text-align: center; font-weight: bold; margin: 10px 0px 20px 0px; }
        .sta  { background-color: #d0d0d0; margin: 10px; padding: 10px; border-radius: 5px; font-weight: bold; }
        .name { font-size: 20px; margin-bottom: 20px; }
        #main { height: calc(100%-50px); }
        #time { margin: 10px 20px; font-size: 10px; color: #a0a0a0; font-style: italic; }
        .prox { color: red; }
        .dest { margin-top: 5px; color: white; padding: 5px; border-radius: 5px; }
        .plat { display: inline-block; width: 15px; margin-right: 5px; text-align: center; }
        .ttnt { float: right; }
        .sTCL { background-color: #F7943E }
        .sISL { background-color: #007DC5 }
        .sTML { background-color: #923011 }
        .sAEL { background-color: #00888A }
        .sTWL { background-color: #ED1D24;}
    </style>
</head>
<body>
    <div id="titl">Next Train</div>
    <div id="time" style="text-align: right;"></div>
    <div id="main"></div>
    <!-- template -->
    <template id="Tsta"><div class="sta"><div class="name">{{sta}} {{prox}}</div><div>{{{plats}}}</div></div></template>
    <template id="TstaDest"><div class="dest s{{line}}"><span class="plat">{{plat}}</span><span>{{dest}}</span><span style="float: right; font-weight: normal">&nbsp;mins</span><span class="ttnt">{{ttnt}}</span></div></template>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.1/mustache.min.js"></script>
    <script>
        const $ = document.querySelector.bind( document );
        const DEFAULT_STA = ['NAC', 'HOK', 'SYP', 'CEN']; var PROX_STA = [];
        const REF = {"ADM":{"line":{"EAL":{},"ISL":{},"TWL":{},"SIL":{}},"chi":"金鐘","eng":"Admiralty"},"AIR":{"line":{"AEL":{}},"chi":"機場","eng":"Airport"},"AUS":{"line":{"TML":{}},"chi":"柯士甸","eng":"Austin"},"AWE":{"line":{"AEL":{}},"chi":"博覽館","eng":"AsiaWorld-Expo"},"CAB":{"line":{"ISL":{}},"chi":"銅鑼灣","eng":"Causeway Bay"},"CEN":{"line":{"ISL":{},"TWL":{}},"chi":"中環","eng":"Central"},"CHH":{"line":{"KTL":{}},"chi":"彩虹","eng":"Choi Hung"},"CHW":{"line":{"ISL":{}},"chi":"柴灣","eng":"Chai Wan"},"CIO":{"line":{"TML":{}},"chi":"第一城","eng":"City One"},"CKT":{"line":{"TML":{}},"chi":"車公廟","eng":"Che Kung Temple"},"CSW":{"line":{"TWL":{}},"chi":"長沙灣","eng":"Cheung Sha Wan"},"DIH":{"line":{"KTL":{},"TML":{}},"chi":"鑽石山","eng":"Diamond Hill"},"DIS":{"line":{"DRL":{}},"chi":"迪士尼","eng":"Disneyland Resort"},"ETS":{"line":{"TML":{}},"chi":"尖東","eng":"East Tsim Sha Tsui"},"EXC":{"line":{"EAL":{}},"chi":"會展","eng":"Exhibition Centre"},"FAN":{"line":{"EAL":{}},"chi":"粉嶺","eng":"Fanling"},"FOH":{"line":{"ISL":{}},"chi":"炮台山","eng":"Fortress Hill"},"FOT":{"line":{"EAL":{}},"chi":"火炭","eng":"Fo Tan"},"HAH":{"line":{"TKL":{}},"chi":"坑口","eng":"Hang Hau"},"HEO":{"line":{"TML":{}},"chi":"恆安","eng":"Heng On"},"HFC":{"line":{"ISL":{}},"chi":"杏花邨","eng":"Heng Fa Chuen"},"HIK":{"line":{"TML":{}},"chi":"顯徑","eng":"Hin Keng"},"HKU":{"line":{"ISL":{}},"chi":"香港大學","eng":"HKU"},"HOK":{"line":{"AEL":{},"TCL":{}},"chi":"香港","eng":"Hong Kong"},"HOM":{"line":{"KTL":{},"TML":{}},"chi":"何文田","eng":"Ho Man Tin"},"HUH":{"line":{"EAL":{},"TML":{}},"chi":"紅磡","eng":"Hung Hom"},"JOR":{"line":{"TWL":{}},"chi":"佐敦","eng":"Jordan"},"KAT":{"line":{"TML":{}},"chi":"啟德","eng":"Kai Tak"},"KET":{"line":{"ISL":{}},"chi":"堅尼地城","eng":"Kennedy Town"},"KOB":{"line":{"KTL":{}},"chi":"九龍灣","eng":"Kowloon Bay"},"KOT":{"line":{"EAL":{},"KTL":{}},"chi":"九龍塘","eng":"Kowloon Tong"},"KOW":{"line":{"AEL":{},"TCL":{}},"chi":"九龍","eng":"Kowloon"},"KSR":{"line":{"TML":{}},"chi":"錦上路","eng":"Kam Sheung Road"},"KWF":{"line":{"TWL":{}},"chi":"葵芳","eng":"Kwai Fong"},"KWH":{"line":{"TWL":{}},"chi":"葵興","eng":"Kwai Hing"},"KWT":{"line":{"KTL":{}},"chi":"觀塘","eng":"Kwun Tong"},"LAK":{"line":{"TCL":{},"TWL":{}},"chi":"茘景","eng":"Lai King"},"LAT":{"line":{"KTL":{}},"chi":"藍田","eng":"Lam Tin"},"LCK":{"line":{"TWL":{}},"chi":"茘枝角","eng":"Lai Chi Kok"},"LET":{"line":{"SIL":{}},"chi":"利東","eng":"Lei Tung"},"LHP":{"line":{"TKL":{}},"chi":"康城","eng":"LOHAS Park"},"LMC":{"line":{"EAL":{}},"chi":"落馬洲","eng":"Lok Ma Chau"},"LOF":{"line":{"KTL":{}},"chi":"樂富","eng":"Lok Fu"},"LOP":{"line":{"TML":{}},"chi":"朗屏","eng":"Long Ping"},"LOW":{"line":{"EAL":{}},"chi":"羅湖","eng":"Lo Wu"},"MEF":{"line":{"TML":{},"TWL":{}},"chi":"美孚","eng":"Mei Foo"},"MKK":{"line":{"EAL":{}},"chi":"旺角東","eng":"Mong Kok East"},"MOK":{"line":{"KTL":{},"TWL":{}},"chi":"旺角","eng":"Mong Kok"},"MOS":{"line":{"TML":{}},"chi":"馬鞍山","eng":"Ma On Shan"},"NAC":{"line":{"TML":{},"TCL":{}},"chi":"南昌","eng":"Nam Cheong"},"NOP":{"line":{"ISL":{},"TKL":{}},"chi":"北角","eng":"North Point"},"NTK":{"line":{"KTL":{}},"chi":"牛頭角","eng":"Ngau Tau Kok"},"OCP":{"line":{"SIL":{}},"chi":"海洋公園","eng":"Ocean Park"},"OLY":{"line":{"TCL":{}},"chi":"奧運","eng":"Olympic"},"POA":{"line":{"TKL":{}},"chi":"寶琳","eng":"Po Lam"},"PRE":{"line":{"KTL":{},"TWL":{}},"chi":"太子","eng":"Prince Edward"},"QUB":{"line":{"ISL":{},"TKL":{}},"chi":"鰂魚涌","eng":"Quarry Bay"},"SHM":{"line":{"TML":{}},"chi":"石門","eng":"Shek Mun"},"SHS":{"line":{"EAL":{}},"chi":"上水","eng":"Sheung Shui"},"SHT":{"line":{"EAL":{}},"chi":"沙田","eng":"Sha Tin"},"SHW":{"line":{"ISL":{}},"chi":"上環","eng":"Sheung Wan"},"SIH":{"line":{"TML":{}},"chi":"兆康","eng":"Siu Hong"},"SKM":{"line":{"KTL":{}},"chi":"石硤尾","eng":"Shek Kip Mei"},"SKW":{"line":{"ISL":{}},"chi":"筲箕灣","eng":"Shau Kei Wan"},"SOH":{"line":{"SIL":{}},"chi":"海怡半島","eng":"South Horizons"},"SSP":{"line":{"TWL":{}},"chi":"深水埗","eng":"Sham Shui Po"},"STW":{"line":{"TML":{}},"chi":"沙田圍","eng":"Sha Tin Wai"},"SUN":{"line":{"DRL":{},"TCL":{}},"chi":"欣澳","eng":"Sunny Bay"},"SUW":{"line":{"TML":{}},"chi":"宋皇臺","eng":"Sung Wong Toi"},"SWH":{"line":{"ISL":{}},"chi":"西灣河","eng":"Sai Wan Ho"},"SYP":{"line":{"ISL":{}},"chi":"西營盤","eng":"Sai Ying Pun"},"TAK":{"line":{"ISL":{}},"chi":"太古","eng":"Tai Koo"},"TAP":{"line":{"EAL":{}},"chi":"大埔墟","eng":"Tai Po Market"},"TAW":{"line":{"EAL":{},"TML":{}},"chi":"大圍","eng":"Tai Wai"},"TIH":{"line":{"ISL":{}},"chi":"天后","eng":"Tin Hau"},"TIK":{"line":{"KTL":{},"TKL":{}},"chi":"調景嶺","eng":"Tiu Keng Leng"},"TIS":{"line":{"TML":{}},"chi":"天水圍","eng":"Tin Shui Wai"},"TKO":{"line":{"TKL":{}},"chi":"將軍澳","eng":"Tseung Kwan O"},"TKW":{"line":{"TML":{}},"chi":"土瓜灣","eng":"To Kwa Wan"},"TSH":{"line":{"TML":{}},"chi":"大水坑","eng":"Tai Shui Hang"},"TST":{"line":{"TWL":{}},"chi":"尖沙咀","eng":"Tsim Sha Tsui"},"TSW":{"line":{"TWL":{}},"chi":"荃灣","eng":"Tsuen Wan"},"TSY":{"line":{"AEL":{},"TCL":{}},"chi":"青衣","eng":"Tsing Yi"},"TUC":{"line":{"TCL":{}},"chi":"東涌","eng":"Tung Chung"},"TUM":{"line":{"TML":{}},"chi":"屯門","eng":"Tuen Mun"},"TWH":{"line":{"TWL":{}},"chi":"大窩口","eng":"Tai Wo Hau"},"TWO":{"line":{"EAL":{}},"chi":"太和","eng":"Tai Wo"},"TWW":{"line":{"TML":{}},"chi":"荃灣西","eng":"Tsuen Wan West"},"UNI":{"line":{"EAL":{}},"chi":"大學","eng":"University"},"WAC":{"line":{"ISL":{}},"chi":"灣仔","eng":"Wan Chai"},"WCH":{"line":{"SIL":{}},"chi":"黃竹坑","eng":"Wong Chuk Hang"},"WHA":{"line":{"KTL":{}},"chi":"黃埔","eng":"Whampoa"},"WKS":{"line":{"TML":{}},"chi":"烏溪沙","eng":"Wu Kai Sha"},"WTS":{"line":{"KTL":{}},"chi":"黃大仙","eng":"Wong Tai Sin"},"YAT":{"line":{"KTL":{},"TKL":{}},"chi":"油塘","eng":"Yau Tong"},"YMT":{"line":{"KTL":{},"TWL":{}},"chi":"油麻地","eng":"Yau Ma Tei"},"YUL":{"line":{"TML":{}},"chi":"元朗","eng":"Yuen Long"}};
        const STA_COORD = [{"sta":"AWE","latitude":22.3218,"longtitude":113.9412},{"sta":"AIR","latitude":22.316,"longtitude":113.9366},{"sta":"TSY","latitude":22.3584,"longtitude":114.107},{"sta":"KOW","latitude":22.3049,"longtitude":114.1615},{"sta":"HOK","latitude":22.285,"longtitude":114.158},{"sta":"SUN","latitude":22.3318,"longtitude":114.0288},{"sta":"DIS","latitude":22.3155,"longtitude":114.0451},{"sta":"LOW","latitude":22.5283,"longtitude":114.1134},{"sta":"SHS","latitude":22.5012,"longtitude":114.128},{"sta":"FAN","latitude":22.4921,"longtitude":114.1387},{"sta":"TWO","latitude":22.4511,"longtitude":114.1611},{"sta":"TAP","latitude":22.4446,"longtitude":114.1706},{"sta":"UNI","latitude":22.4134,"longtitude":114.2102},{"sta":"FOT","latitude":22.3953,"longtitude":114.1982},{"sta":"SHT","latitude":22.3825,"longtitude":114.1875},{"sta":"TAW","latitude":22.3731,"longtitude":114.1786},{"sta":"KOT","latitude":22.337,"longtitude":114.1762},{"sta":"MKK","latitude":22.3222,"longtitude":114.1728},{"sta":"HUH","latitude":22.3029,"longtitude":114.1816},{"sta":"EXC","latitude":22.2818,"longtitude":114.1754},{"sta":"ADM","latitude":22.2788,"longtitude":114.1646},{"sta":"LMC","latitude":22.5144,"longtitude":114.0657},{"sta":"CHW","latitude":22.2644,"longtitude":114.2368},{"sta":"HFC","latitude":22.2769,"longtitude":114.2398},{"sta":"SKW","latitude":22.2789,"longtitude":114.2289},{"sta":"SWH","latitude":22.2816,"longtitude":114.2224},{"sta":"TAK","latitude":22.2846,"longtitude":114.2161},{"sta":"QUB","latitude":22.2878,"longtitude":114.2096},{"sta":"NOP","latitude":22.2909,"longtitude":114.2007},{"sta":"FOH","latitude":22.2881,"longtitude":114.1936},{"sta":"TIH","latitude":22.2827,"longtitude":114.1917},{"sta":"CAB","latitude":22.2802,"longtitude":114.1835},{"sta":"WAC","latitude":22.2773,"longtitude":114.1728},{"sta":"CEN","latitude":22.282,"longtitude":114.1576},{"sta":"SHW","latitude":22.2862,"longtitude":114.1518},{"sta":"SYP","latitude":22.2856,"longtitude":114.1427},{"sta":"HKU","latitude":22.2841,"longtitude":114.1356},{"sta":"KET","latitude":22.2812,"longtitude":114.1285},{"sta":"TIK","latitude":22.3042,"longtitude":114.2524},{"sta":"YAT","latitude":22.2979,"longtitude":114.2371},{"sta":"LATitude","latitude":22.3068,"longtitude":114.233},{"sta":"KWT","latitude":22.3121,"longtitude":114.2265},{"sta":"NTK","latitude":22.3154,"longtitude":114.2193},{"sta":"KOB","latitude":22.3235,"longtitude":114.2141},{"sta":"CHH","latitude":22.3348,"longtitude":114.2089},{"sta":"DIH","latitude":22.3401,"longtitude":114.2016},{"sta":"WTS","latitude":22.3417,"longtitude":114.1939},{"sta":"LOF","latitude":22.338,"longtitude":114.1871},{"sta":"SKM","latitude":22.332,"longtitude":114.1687},{"sta":"PRE","latitude":22.3245,"longtitude":114.1683},{"sta":"MOK","latitude":22.3191,"longtitude":114.1694},{"sta":"YMT","latitude":22.3129,"longtitude":114.1707},{"sta":"HOM","latitude":22.3093,"longtitude":114.1829},{"sta":"WHA","latitude":22.305,"longtitude":114.1896},{"sta":"WKS","latitude":22.4291,"longtitude":114.2438},{"sta":"MOS","latitude":22.4247,"longtitude":114.2316},{"sta":"HEO","latitude":22.4174,"longtitude":114.2258},{"sta":"TSH","latitude":22.4088,"longtitude":114.223},{"sta":"SHM","latitude":22.3877,"longtitude":114.2083},{"sta":"CIO","latitude":22.3828,"longtitude":114.2035},{"sta":"STW","latitude":22.3771,"longtitude":114.195},{"sta":"CKT","latitude":22.3748,"longtitude":114.1861},{"sta":"HIK","latitude":22.364,"longtitude":114.1708},{"sta":"KAT","latitude":22.3304,"longtitude":114.1994},{"sta":"SUW","latitude":22.3258,"longtitude":114.1914},{"sta":"TKW","latitude":22.3172,"longtitude":114.1876},{"sta":"ETS","latitude":22.2955,"longtitude":114.1754},{"sta":"AUS","latitude":22.3046,"longtitude":114.1665},{"sta":"NAC","latitude":22.3268,"longtitude":114.1533},{"sta":"MEF","latitude":22.3381,"longtitude":114.1376},{"sta":"TWW","latitude":22.3686,"longtitude":114.1098},{"sta":"KSR","latitude":22.4348,"longtitude":114.0634},{"sta":"YUL","latitude":22.4461,"longtitude":114.0352},{"sta":"LOP","latitude":22.4477,"longtitude":114.0253},{"sta":"TIS","latitude":22.4481,"longtitude":114.0046},{"sta":"SIH","latitude":22.412,"longtitude":113.9786},{"sta":"TUM","latitude":22.3952,"longtitude":113.9731},{"sta":"TUC","latitude":22.2893,"longtitude":113.9416},{"sta":"LAK","latitude":22.3484,"longtitude":114.1261},{"sta":"OLY","latitude":22.3178,"longtitude":114.1602},{"sta":"POA","latitude":22.3224,"longtitude":114.258},{"sta":"HAH","latitude":22.3156,"longtitude":114.2644},{"sta":"TKO","latitude":22.3074,"longtitude":114.26},{"sta":"LHP","latitude":22.2957,"longtitude":114.2689},{"sta":"TSW","latitude":22.3736,"longtitude":114.1178},{"sta":"TWH","latitude":22.3708,"longtitude":114.125},{"sta":"KWH","latitude":22.3632,"longtitude":114.1312},{"sta":"KWF","latitude":22.3569,"longtitude":114.1279},{"sta":"LCK","latitude":22.3373,"longtitude":114.1482},{"sta":"CSW","latitude":22.3354,"longtitude":114.1563},{"sta":"SSP","latitude":22.3307,"longtitude":114.1623},{"sta":"JOR","latitude":22.3049,"longtitude":114.1718},{"sta":"TST","latitude":22.2973,"longtitude":114.1722},{"sta":"OCP","latitude":22.2486,"longtitude":114.1743},{"sta":"WCH","latitude":22.248,"longtitude":114.1681},{"sta":"LET","latitude":22.2421,"longtitude":114.1562},{"sta":"SOH","latitude":22.2425,"longtitude":114.1491}];
        // utility
        Array.prototype.distinct = function(){ return [...new Set(this)] };
        Array.prototype.except = function(x){return this.filter(y=>x!=y)};
        // d - calc distance between two latitude-longtitude, result in meters
        let d = (d1,d2) => { let latitude=d1.latitude-d2.latitude, longtitude=d1.longtitude-d2.longtitude; return 100000*Math.sqrt(latitude*latitude+longtitude*longtitude) }
        // g - fetching from web and put the latest into STATIONS
        let g = async (l,s) => {
            let u = `https://rt.data.gov.hk/v1/transport/mtr/getSchedule.php?line=${l}&sta=${s}`; console.log(u);
            return fetch(u).then(x=>x.json()).then(o => {
                Object.entries(o['data']).forEach(([p,d]) => {
                    Object.entries((Object.groupBy([d.UP??[], d.DOWN??[]].flat(1), ({plat})=>plat))).forEach(([plat,time]) => {
                        STATIONS[s][l][plat+''] = time; r();
                    });
                });
            });
        }
        // r - generate HTML and render (order: sta -> line -> dest -> time)
        let r = () => {
            let currTime = new Date();
            let ss = Object.entries(STATIONS).map(([sta, line_dict]) => {
                let plats = Object.entries(line_dict).map(([line, plat_dict]) => {
                    return Object.entries(plat_dict).map(([plat, time_list]) => {
                        // Math.floor((new Date(x.time)-currTime)/60000)
                        let ttnt = time_list.map(x=>x.ttnt).filter(x=>x<=10).join(', ');
                        return Mustache.render($('#TstaDest').innerHTML, {line, plat, dest: time_list.map(x=>REF[x.dest].chi).distinct().join(' / '), ttnt:ttnt==''?'-':ttnt});
                    }).join('');
                }).join('');
                return Mustache.render($('#Tsta').innerHTML, {sta: REF[sta].chi, prox: PROX_STA.indexOf(sta)>=0?'📍':'',  plats});
            }).join('');
            $('#main').innerHTML = ss;
            $('#time').innerText = 'Last update: ' + new Date().toLocaleTimeString();
        }
        // f - running the actual fetch in a loop
        let f = () => {
            navigator.geolocation.getCurrentPosition(x => {
                console.log(x); let t = STA_COORD.filter(s=>d(x,s)<=500).map(s=>x.sta);
                t.except(PROX_STA.concat(DEFAULT_STA)).forEach(x => STATIONS[x] = REF[x].line); // add
                PROX_STA.except(t.except(DEFAULT_STA)).forEach(x => {delete STATIONS[x]}); // remove
                PROX_STA = t;
                Object.entries(STATIONS).forEach(([s,ls]) => { Object.keys(ls).forEach(l => g(l,s)) });
            }, () => {
                Object.entries(STATIONS).forEach(([s,ls]) => { Object.keys(ls).forEach(l => g(l,s)) });
            });
        }
        // initialize
        var STATIONS = Object.fromEntries(DEFAULT_STA.map(s=>[s, REF[s].line]));
        f(); $('#titl').addEventListener('click', f);
        // debug
        // var STATIONS = JSON.parse("{\"NAC\":{\"TML\":{\"1\":[{\"seq\":\"1\",\"dest\":\"TUM\",\"plat\":\"1\",\"time\":\"2024-07-15 13:41:22\",\"ttnt\":\"1\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"TUM\",\"plat\":\"1\",\"time\":\"2024-07-15 13:48:22\",\"ttnt\":\"8\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"TUM\",\"plat\":\"1\",\"time\":\"2024-07-15 13:55:22\",\"ttnt\":\"15\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"TUM\",\"plat\":\"1\",\"time\":\"2024-07-15 14:02:22\",\"ttnt\":\"22\",\"valid\":\"Y\",\"source\":\"-\"}],\"2\":[{\"seq\":\"1\",\"dest\":\"WKS\",\"plat\":\"2\",\"time\":\"2024-07-15 13:42:22\",\"ttnt\":\"2\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"WKS\",\"plat\":\"2\",\"time\":\"2024-07-15 13:49:22\",\"ttnt\":\"9\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"WKS\",\"plat\":\"2\",\"time\":\"2024-07-15 13:56:22\",\"ttnt\":\"16\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"WKS\",\"plat\":\"2\",\"time\":\"2024-07-15 14:03:22\",\"ttnt\":\"23\",\"valid\":\"Y\",\"source\":\"-\"}]},\"TCL\":{\"3\":[{\"ttnt\":\"2\",\"valid\":\"Y\",\"plat\":\"3\",\"time\":\"2024-07-15 13:41:00\",\"source\":\"-\",\"dest\":\"TUC\",\"seq\":\"1\"},{\"ttnt\":\"8\",\"valid\":\"Y\",\"plat\":\"3\",\"time\":\"2024-07-15 13:49:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"2\"},{\"ttnt\":\"15\",\"valid\":\"Y\",\"plat\":\"3\",\"time\":\"2024-07-15 13:55:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"3\"},{\"ttnt\":\"22\",\"valid\":\"Y\",\"plat\":\"3\",\"time\":\"2024-07-15 14:03:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"4\"}],\"4\":[{\"ttnt\":\"5\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:45:00\",\"source\":\"-\",\"dest\":\"HOK\",\"seq\":\"1\"},{\"ttnt\":\"13\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:52:00\",\"source\":\"-\",\"dest\":\"HOK\",\"seq\":\"2\"},{\"ttnt\":\"19\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:58:00\",\"source\":\"-\",\"dest\":\"HOK\",\"seq\":\"3\"},{\"ttnt\":\"25\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 14:06:00\",\"source\":\"+\",\"dest\":\"HOK\",\"seq\":\"4\"}]}},\"HOK\":{\"AEL\":{\"1\":[{\"ttnt\":\"0\",\"valid\":\"Y\",\"plat\":\"1\",\"time\":\"2024-07-15 13:41:00\",\"source\":\"-\",\"dest\":\"AWE\",\"seq\":\"1\"},{\"ttnt\":\"10\",\"valid\":\"Y\",\"plat\":\"1\",\"time\":\"2024-07-15 13:50:00\",\"source\":\"+\",\"dest\":\"AWE\",\"seq\":\"2\"},{\"ttnt\":\"19\",\"valid\":\"Y\",\"plat\":\"1\",\"time\":\"2024-07-15 14:00:00\",\"source\":\"+\",\"dest\":\"AWE\",\"seq\":\"3\"},{\"ttnt\":\"29\",\"valid\":\"Y\",\"plat\":\"1\",\"time\":\"2024-07-15 14:10:00\",\"source\":\"+\",\"dest\":\"AWE\",\"seq\":\"4\"}]},\"TCL\":{\"4\":[{\"ttnt\":\"1\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:42:00\",\"source\":\"-\",\"dest\":\"TUC\",\"seq\":\"1\"},{\"ttnt\":\"8\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:48:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"2\"},{\"ttnt\":\"15\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 13:56:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"3\"},{\"ttnt\":\"22\",\"valid\":\"Y\",\"plat\":\"4\",\"time\":\"2024-07-15 14:02:00\",\"source\":\"+\",\"dest\":\"TUC\",\"seq\":\"4\"}]}},\"SYP\":{\"ISL\":{\"1\":[{\"seq\":\"1\",\"dest\":\"CHW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:43:24\",\"ttnt\":\"3\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"CHW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:47:24\",\"ttnt\":\"7\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"CHW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:50:24\",\"ttnt\":\"10\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"CHW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:54:24\",\"ttnt\":\"14\",\"valid\":\"Y\",\"source\":\"-\"}],\"2\":[{\"seq\":\"1\",\"dest\":\"KET\",\"plat\":\"2\",\"time\":\"2024-07-15 13:44:24\",\"ttnt\":\"4\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"KET\",\"plat\":\"2\",\"time\":\"2024-07-15 13:46:24\",\"ttnt\":\"6\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"KET\",\"plat\":\"2\",\"time\":\"2024-07-15 13:51:24\",\"ttnt\":\"11\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"KET\",\"plat\":\"2\",\"time\":\"2024-07-15 13:54:24\",\"ttnt\":\"14\",\"valid\":\"Y\",\"source\":\"-\"}]}},\"CEN\":{\"ISL\":{\"3\":[{\"seq\":\"1\",\"dest\":\"CHW\",\"plat\":\"3\",\"time\":\"2024-07-15 13:42:24\",\"ttnt\":\"2\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"CHW\",\"plat\":\"3\",\"time\":\"2024-07-15 13:46:24\",\"ttnt\":\"6\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"CHW\",\"plat\":\"3\",\"time\":\"2024-07-15 13:51:24\",\"ttnt\":\"11\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"CHW\",\"plat\":\"3\",\"time\":\"2024-07-15 13:54:24\",\"ttnt\":\"14\",\"valid\":\"Y\",\"source\":\"-\"}],\"4\":[{\"seq\":\"1\",\"dest\":\"KET\",\"plat\":\"4\",\"time\":\"2024-07-15 13:40:24\",\"ttnt\":\"0\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"2\",\"dest\":\"KET\",\"plat\":\"4\",\"time\":\"2024-07-15 13:42:24\",\"ttnt\":\"2\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"KET\",\"plat\":\"4\",\"time\":\"2024-07-15 13:47:24\",\"ttnt\":\"7\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"KET\",\"plat\":\"4\",\"time\":\"2024-07-15 13:50:24\",\"ttnt\":\"10\",\"valid\":\"Y\",\"source\":\"-\"}]},\"TWL\":{\"1\":[{\"seq\":\"2\",\"dest\":\"TSW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:45:16\",\"ttnt\":\"5\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"4\",\"dest\":\"TSW\",\"plat\":\"1\",\"time\":\"2024-07-15 13:52:16\",\"ttnt\":\"12\",\"valid\":\"Y\",\"source\":\"-\"}],\"2\":[{\"seq\":\"1\",\"dest\":\"TSW\",\"plat\":\"2\",\"time\":\"2024-07-15 13:41:16\",\"ttnt\":\"1\",\"valid\":\"Y\",\"source\":\"-\"},{\"seq\":\"3\",\"dest\":\"TSW\",\"plat\":\"2\",\"time\":\"2024-07-15 13:48:16\",\"ttnt\":\"8\",\"valid\":\"Y\",\"source\":\"-\"}]}}}")
        // r();
    </script>
</body>
</html>